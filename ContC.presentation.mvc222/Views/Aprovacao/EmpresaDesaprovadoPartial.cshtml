@model ContC.presentation.mvc.Models.EmpresasProfissionalViewModel
<label>Selecione um Empresa :</label>
@Html.DropDownListFor(model => model.EmpresaId, Model.Empresas, new { id="EmpresaDesaprovadoId", @class = "form-control" })

<script>
    $(document).ready(function () {
        $("#EmpresaDesaprovadoId").change(function () {
            var profissionalId = $("#ProfissionalDesaprovadoId").val();
            var empresaId = $("#EmpresaDesaprovadoId").val();
            var gridDiv = $("#gridDivNA");
            $.ajax({
                cache: false,
                type: "GET",
                url: '@Url.Action("DesaprovadoGridPartial", "Aprovacao")?profissionalId=' + profissionalId + "&empresaId=" + empresaId,
                data: { "profissionalId": profissionalId, "empresaId": empresaId },
                success: function (data) {
                    gridDiv.html('');
                    gridDiv.html(data);
                },
                error: function (xhr, ajaxOptions, thrownError) {
                    alert('Failed to retrieve.');
                }
            });
        });
    });
</script>
