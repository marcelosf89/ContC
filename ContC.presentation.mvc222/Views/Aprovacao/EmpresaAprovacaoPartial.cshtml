@model ContC.presentation.mvc.Models.EmpresasProfissionalViewModel
<label>Selecione um Empresa :</label>
@Html.DropDownListFor(model => model.EmpresaId, Model.Empresas, new { id="EmpresaAprovacaoId", @class = "form-control" })

<script>
    $(document).ready(function () {
        $("#EmpresaAprovacaoId").change(function () {
            var profissionalId = $("#ProfissionalAprovacaoId").val();
            var empresaId = $("#EmpresaAprovacaoId").val();
            var gridDiv = $("#gridDiv");
            $.ajax({
                cache: false,
                type: "GET",
                url: '@Url.Action("AprovacaoGridPartial", "Aprovacao")?profissionalId=' + profissionalId + "&empresaId=" + empresaId,
                data: { "profissionalId": profissionalId, "empresaId": empresaId },
                success: function (data) {
                    gridDiv.html('');
                    gridDiv.html(data);
                },
                error: function (xhr, ajaxOptions, thrownError) {
                    alert('Failed to retrieve.');
                }
            });
        });
    });
</script>
